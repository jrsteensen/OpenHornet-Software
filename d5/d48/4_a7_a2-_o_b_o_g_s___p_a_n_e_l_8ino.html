<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Documentation: /github/workspace/embedded/OH4_Left_Console/4A7A2-OBOGS_PANEL/4A7A2-OBOGS_PANEL.ino File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">DoxygenAwesomeFragmentCopyButton.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">DoxygenAwesomeParagraphLink.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">DoxygenAwesomeInteractiveToc.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript">DoxygenAwesomeTabs.init()</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../oh_vert.svg"/></td>
  <td id="projectalign">
   <div id="projectname">API Documentation<span id="projectnumber">&#160;v0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">4A7A2-OBOGS_PANEL.ino File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Controls the OBOGS panel, MC &amp; HYD ISO panel, &amp; NUC WPN panel.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;DcsBios.h&quot;</code><br />
</div>
<p><a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7a569225b9579d94efd84f1dd616cc89" id="r_a7a569225b9579d94efd84f1dd616cc89"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a569225b9579d94efd84f1dd616cc89">DCSBIOS_DEFAULT_SERIAL</a></td></tr>
<tr class="memdesc:a7a569225b9579d94efd84f1dd616cc89"><td class="mdescLeft">&#160;</td><td class="mdescRight">This enables the default serial communication for DCS-BIOS. (Used with all other microcontrollers than the ATmega328P or ATmega2560.)  <br /></td></tr>
<tr class="separator:a7a569225b9579d94efd84f1dd616cc89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b34ada3c72aac2cfffa114ca0ee74b" id="r_ab6b34ada3c72aac2cfffa114ca0ee74b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6b34ada3c72aac2cfffa114ca0ee74b">TXENABLE_PIN</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:ab6b34ada3c72aac2cfffa114ca0ee74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets TXENABLE_PIN to Arduino Pin 5.  <br /></td></tr>
<tr class="separator:ab6b34ada3c72aac2cfffa114ca0ee74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a054bfadfd6fb4eddc4cf2126ab11d" id="r_aa8a054bfadfd6fb4eddc4cf2126ab11d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8a054bfadfd6fb4eddc4cf2126ab11d">UART1_SELECT</a></td></tr>
<tr class="memdesc:aa8a054bfadfd6fb4eddc4cf2126ab11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects UART1 on Arduino for serial communication.  <br /></td></tr>
<tr class="separator:aa8a054bfadfd6fb4eddc4cf2126ab11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c854db619968c2f9fd530a437b0494" id="r_af7c854db619968c2f9fd530a437b0494"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af7c854db619968c2f9fd530a437b0494">OBOGS_SW1</a>&#160;&#160;&#160;A3</td></tr>
<tr class="memdesc:af7c854db619968c2f9fd530a437b0494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Onboard Oxygenerator.  <br /></td></tr>
<tr class="separator:af7c854db619968c2f9fd530a437b0494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d5aeaecc7f4ca06f839d3a47798be82" id="r_a6d5aeaecc7f4ca06f839d3a47798be82"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d5aeaecc7f4ca06f839d3a47798be82">OXY_FLOW_SW1</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:a6d5aeaecc7f4ca06f839d3a47798be82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Oxygen Flow Rate.  <br /></td></tr>
<tr class="separator:a6d5aeaecc7f4ca06f839d3a47798be82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4be17c28d83227800ca60b9a8c6f6b5" id="r_ab4be17c28d83227800ca60b9a8c6f6b5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab4be17c28d83227800ca60b9a8c6f6b5">NUC_SW1</a>&#160;&#160;&#160;A2</td></tr>
<tr class="memdesc:ab4be17c28d83227800ca60b9a8c6f6b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Nuclear Weapon Consent Switch (<b>NOT</b> implemented in DCS).  <br /></td></tr>
<tr class="separator:ab4be17c28d83227800ca60b9a8c6f6b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2dcfac57b872abaa738516aa7912c41" id="r_ac2dcfac57b872abaa738516aa7912c41"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2dcfac57b872abaa738516aa7912c41">MC_SW1</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ac2dcfac57b872abaa738516aa7912c41"><td class="mdescLeft">&#160;</td><td class="mdescRight">MC 1 OFF.  <br /></td></tr>
<tr class="separator:ac2dcfac57b872abaa738516aa7912c41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa21bde32064da6b7d7b64387741a34" id="r_acaa21bde32064da6b7d7b64387741a34"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acaa21bde32064da6b7d7b64387741a34">MC_SW2</a>&#160;&#160;&#160;A1</td></tr>
<tr class="memdesc:acaa21bde32064da6b7d7b64387741a34"><td class="mdescLeft">&#160;</td><td class="mdescRight">MC 2 OFF.  <br /></td></tr>
<tr class="separator:acaa21bde32064da6b7d7b64387741a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf3c8026e64e13ba2ce0c9a059011018" id="r_abf3c8026e64e13ba2ce0c9a059011018"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf3c8026e64e13ba2ce0c9a059011018">HYD_SW1</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:abf3c8026e64e13ba2ce0c9a059011018"><td class="mdescLeft">&#160;</td><td class="mdescRight">HYD Override.  <br /></td></tr>
<tr class="separator:abf3c8026e64e13ba2ce0c9a059011018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c2ee0bc9aef0469f08b839b049a3ed4" id="r_a2c2ee0bc9aef0469f08b839b049a3ed4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c2ee0bc9aef0469f08b839b049a3ed4">OXY_MSG</a>&#160;&#160;&#160;&quot;OXY_FLOW&quot;</td></tr>
<tr class="memdesc:a2c2ee0bc9aef0469f08b839b049a3ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">DCSBios Message to move the OXY_FLOW knob.  <br /></td></tr>
<tr class="separator:a2c2ee0bc9aef0469f08b839b049a3ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada2a757bd8f6c604855a1268db2f93a4" id="r_ada2a757bd8f6c604855a1268db2f93a4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ada2a757bd8f6c604855a1268db2f93a4">MAX_FLOW</a>&#160;&#160;&#160;&quot;+65535&quot;</td></tr>
<tr class="memdesc:ada2a757bd8f6c604855a1268db2f93a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OXY FLOW knob in the sim is a 90 degree pot, with max = 65535 we'll add the full on value.  <br /></td></tr>
<tr class="separator:ada2a757bd8f6c604855a1268db2f93a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e8ca88917bfe7ac949390e85c5681b" id="r_ab8e8ca88917bfe7ac949390e85c5681b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8e8ca88917bfe7ac949390e85c5681b">MIN_FLOW</a>&#160;&#160;&#160;&quot;-65535&quot;</td></tr>
<tr class="memdesc:ab8e8ca88917bfe7ac949390e85c5681b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The OXY FLOW Knob in the sim is a 90 degree pot, with min = 0 we'll subtract the full on value.  <br /></td></tr>
<tr class="separator:ab8e8ca88917bfe7ac949390e85c5681b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f50ffddc5ffd2caf5b0f075ae698f1" id="r_a95f50ffddc5ffd2caf5b0f075ae698f1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95f50ffddc5ffd2caf5b0f075ae698f1">REVERSE_OXY_FLOW</a>&#160;&#160;&#160;true</td></tr>
<tr class="memdesc:a95f50ffddc5ffd2caf5b0f075ae698f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">If OXY FLOW knob rotates in the opposite direction in the sim compared to the physical switch then change this to false.  <br /></td></tr>
<tr class="separator:a95f50ffddc5ffd2caf5b0f075ae698f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae5e494d6a2536afb278e957c0796ad8e" id="r_ae5e494d6a2536afb278e957c0796ad8e"><td class="memItemLeft" align="right" valign="top"><a id="ae5e494d6a2536afb278e957c0796ad8e" name="ae5e494d6a2536afb278e957c0796ad8e"></a>
DcsBios::Switch2Pos&#160;</td><td class="memItemRight" valign="bottom"><b>obogsSw</b> (&quot;OBOGS_SW&quot;, <a class="el" href="#af7c854db619968c2f9fd530a437b0494">OBOGS_SW1</a>)</td></tr>
<tr class="separator:ae5e494d6a2536afb278e957c0796ad8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ee899d0d6fe54eb4f489f32eb209c16" id="r_a2ee899d0d6fe54eb4f489f32eb209c16"><td class="memItemLeft" align="right" valign="top"><a id="a2ee899d0d6fe54eb4f489f32eb209c16" name="a2ee899d0d6fe54eb4f489f32eb209c16"></a>
DcsBios::Switch2Pos&#160;</td><td class="memItemRight" valign="bottom"><b>hydIsolateOverrideSw</b> (&quot;HYD_ISOLATE_OVERRIDE_SW&quot;, <a class="el" href="#abf3c8026e64e13ba2ce0c9a059011018">HYD_SW1</a>)</td></tr>
<tr class="separator:a2ee899d0d6fe54eb4f489f32eb209c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef01edeb6d2e0a36480c1688fad66ed3" id="r_aef01edeb6d2e0a36480c1688fad66ed3"><td class="memItemLeft" align="right" valign="top"><a id="aef01edeb6d2e0a36480c1688fad66ed3" name="aef01edeb6d2e0a36480c1688fad66ed3"></a>
DcsBios::Switch3Pos&#160;</td><td class="memItemRight" valign="bottom"><b>mcSw</b> (&quot;MC_SW&quot;, <a class="el" href="#ac2dcfac57b872abaa738516aa7912c41">MC_SW1</a>, <a class="el" href="#acaa21bde32064da6b7d7b64387741a34">MC_SW2</a>)</td></tr>
<tr class="separator:aef01edeb6d2e0a36480c1688fad66ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac390f9f3634611f86743883829e950f1" id="r_ac390f9f3634611f86743883829e950f1"><td class="memItemLeft" align="right" valign="top">DcsBios::Switch2Pos&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac390f9f3634611f86743883829e950f1">nucWpnSw</a> (&quot;NUC_WPN_SW&quot;, <a class="el" href="#ab4be17c28d83227800ca60b9a8c6f6b5">NUC_SW1</a>)</td></tr>
<tr class="separator:ac390f9f3634611f86743883829e950f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d" id="r_a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f" id="r_afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aff5716cbfac20e2b381708cdbfe70c01" id="r_aff5716cbfac20e2b381708cdbfe70c01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff5716cbfac20e2b381708cdbfe70c01">lastBtnState</a> = LOW</td></tr>
<tr class="memdesc:aff5716cbfac20e2b381708cdbfe70c01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last button state for oxy flow logic, initialize to off.  <br /></td></tr>
<tr class="separator:aff5716cbfac20e2b381708cdbfe70c01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16acbaf3b1322ef405fe69a73df920a0" id="r_a16acbaf3b1322ef405fe69a73df920a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a> = LOW</td></tr>
<tr class="memdesc:a16acbaf3b1322ef405fe69a73df920a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Button debounce state for oxy flow logic.  <br /></td></tr>
<tr class="separator:a16acbaf3b1322ef405fe69a73df920a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a025a85b33749fd5dde5cb7edd7aea941" id="r_a025a85b33749fd5dde5cb7edd7aea941"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a025a85b33749fd5dde5cb7edd7aea941">lastDebounceTime</a> = 0</td></tr>
<tr class="memdesc:a025a85b33749fd5dde5cb7edd7aea941"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to hold last button update time for Oxy flow logic, initialize to 0.  <br /></td></tr>
<tr class="separator:a025a85b33749fd5dde5cb7edd7aea941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77d7d18f51343feebbe6d0eea7b4ac57" id="r_a77d7d18f51343feebbe6d0eea7b4ac57"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77d7d18f51343feebbe6d0eea7b4ac57">debounceDelay</a> = 10</td></tr>
<tr class="memdesc:a77d7d18f51343feebbe6d0eea7b4ac57"><td class="mdescLeft">&#160;</td><td class="mdescRight">The debounce delay duration in ms, <b>increase if the output flickers</b>.  <br /></td></tr>
<tr class="separator:a77d7d18f51343feebbe6d0eea7b4ac57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Controls the OBOGS panel, MC &amp; HYD ISO panel, &amp; NUC WPN panel. </p>
<dl class="section author"><dt>Author</dt><dd>Arribe </dd></dl>
<dl class="section date"><dt>Date</dt><dd>03.05.2024 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>u.0.0.1 (partially untested) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright 2016-2024 OpenHornet. Licensed under the Apache License, Version 2.0. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This sketch is based on a wiring diagram for the NUC Switch, but it was not yet tested on hardware. The NUC Switch is a simple 2 position DCSBios switch. It is highly likely it will work fine. All other switches were tested successfully. </dd></dl>
<ul>
<li><b>Reference Designator:</b> 4A7A2</li>
<li><b>Intended Board:</b> ABSIS ALE</li>
<li><b>RS485 Bus Address:</b> 10</li>
</ul>
<h3><a class="anchor" id="autotoc_md39"></a>
Wiring diagram:</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">PIN   </th><th class="markdownTableHeadNone">Function    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A3   </td><td class="markdownTableBodyNone">Onboard Oxygenerator    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">Oxygen Flow Rate    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A2   </td><td class="markdownTableBodyNone">Nuclear Weapon Consent (<b>NOT</b> implemented in DCS)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">MC 1 OFF    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A1   </td><td class="markdownTableBodyNone">MC 2 OFF    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">HYD Override   </td></tr>
</table>
<p>The following #define tells DCS-BIOS that this is a RS-485 slave device. It also sets the address of this slave device. The slave address should be between 1 and 126 and must be unique among all devices on the same bus.</p>
<dl class="bug"><dt><b><a class="el" href="../../de/da5/bug.html#_bug000015">Bug</a></b></dt><dd>Currently does not work with the Pro Micro (32U4), Fails to compile. </dd></dl>
<p>#define DCSBIOS_RS485_SLAVE 10 ///DCSBios RS485 Bus Address, once bug resolved move line below comment. </p>

<p class="definition">Definition in file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7a569225b9579d94efd84f1dd616cc89" name="a7a569225b9579d94efd84f1dd616cc89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a569225b9579d94efd84f1dd616cc89">&#9670;&#160;</a></span>DCSBIOS_DEFAULT_SERIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DCSBIOS_DEFAULT_SERIAL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This enables the default serial communication for DCS-BIOS. (Used with all other microcontrollers than the ATmega328P or ATmega2560.) </p>
<p>Check if we're on a Mega328 or Mega2560 and define the correct serial interface </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00076">76</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="ab6b34ada3c72aac2cfffa114ca0ee74b" name="ab6b34ada3c72aac2cfffa114ca0ee74b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6b34ada3c72aac2cfffa114ca0ee74b">&#9670;&#160;</a></span>TXENABLE_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TXENABLE_PIN&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets TXENABLE_PIN to Arduino Pin 5. </p>
<p>The Arduino pin that is connected to the RE and DE pins on the RS-485 transceiver. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00087">87</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="aa8a054bfadfd6fb4eddc4cf2126ab11d" name="aa8a054bfadfd6fb4eddc4cf2126ab11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8a054bfadfd6fb4eddc4cf2126ab11d">&#9670;&#160;</a></span>UART1_SELECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UART1_SELECT</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Selects UART1 on Arduino for serial communication. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00088">88</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="af7c854db619968c2f9fd530a437b0494" name="af7c854db619968c2f9fd530a437b0494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7c854db619968c2f9fd530a437b0494">&#9670;&#160;</a></span>OBOGS_SW1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBOGS_SW1&#160;&#160;&#160;A3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Onboard Oxygenerator. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00094">94</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="a6d5aeaecc7f4ca06f839d3a47798be82" name="a6d5aeaecc7f4ca06f839d3a47798be82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d5aeaecc7f4ca06f839d3a47798be82">&#9670;&#160;</a></span>OXY_FLOW_SW1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OXY_FLOW_SW1&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Oxygen Flow Rate. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00095">95</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>, and <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00131">setup()</a>.</p>

</div>
</div>
<a id="ab4be17c28d83227800ca60b9a8c6f6b5" name="ab4be17c28d83227800ca60b9a8c6f6b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4be17c28d83227800ca60b9a8c6f6b5">&#9670;&#160;</a></span>NUC_SW1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUC_SW1&#160;&#160;&#160;A2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Nuclear Weapon Consent Switch (<b>NOT</b> implemented in DCS). </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00096">96</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ac390f9f3634611f86743883829e950f1">nucWpnSw()</a>.</p>

</div>
</div>
<a id="ac2dcfac57b872abaa738516aa7912c41" name="ac2dcfac57b872abaa738516aa7912c41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2dcfac57b872abaa738516aa7912c41">&#9670;&#160;</a></span>MC_SW1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MC_SW1&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MC 1 OFF. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00097">97</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="acaa21bde32064da6b7d7b64387741a34" name="acaa21bde32064da6b7d7b64387741a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa21bde32064da6b7d7b64387741a34">&#9670;&#160;</a></span>MC_SW2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MC_SW2&#160;&#160;&#160;A1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MC 2 OFF. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00098">98</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="abf3c8026e64e13ba2ce0c9a059011018" name="abf3c8026e64e13ba2ce0c9a059011018"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf3c8026e64e13ba2ce0c9a059011018">&#9670;&#160;</a></span>HYD_SW1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HYD_SW1&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>HYD Override. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00099">99</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="a2c2ee0bc9aef0469f08b839b049a3ed4" name="a2c2ee0bc9aef0469f08b839b049a3ed4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c2ee0bc9aef0469f08b839b049a3ed4">&#9670;&#160;</a></span>OXY_MSG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OXY_MSG&#160;&#160;&#160;&quot;OXY_FLOW&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DCSBios Message to move the OXY_FLOW knob. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00102">102</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>.</p>

</div>
</div>
<a id="ada2a757bd8f6c604855a1268db2f93a4" name="ada2a757bd8f6c604855a1268db2f93a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada2a757bd8f6c604855a1268db2f93a4">&#9670;&#160;</a></span>MAX_FLOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FLOW&#160;&#160;&#160;&quot;+65535&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The OXY FLOW knob in the sim is a 90 degree pot, with max = 65535 we'll add the full on value. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00103">103</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>.</p>

</div>
</div>
<a id="ab8e8ca88917bfe7ac949390e85c5681b" name="ab8e8ca88917bfe7ac949390e85c5681b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8e8ca88917bfe7ac949390e85c5681b">&#9670;&#160;</a></span>MIN_FLOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_FLOW&#160;&#160;&#160;&quot;-65535&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The OXY FLOW Knob in the sim is a 90 degree pot, with min = 0 we'll subtract the full on value. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00104">104</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>.</p>

</div>
</div>
<a id="a95f50ffddc5ffd2caf5b0f075ae698f1" name="a95f50ffddc5ffd2caf5b0f075ae698f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f50ffddc5ffd2caf5b0f075ae698f1">&#9670;&#160;</a></span>REVERSE_OXY_FLOW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REVERSE_OXY_FLOW&#160;&#160;&#160;true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If OXY FLOW knob rotates in the opposite direction in the sim compared to the physical switch then change this to false. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00105">105</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac390f9f3634611f86743883829e950f1" name="ac390f9f3634611f86743883829e950f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac390f9f3634611f86743883829e950f1">&#9670;&#160;</a></span>nucWpnSw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DcsBios::Switch2Pos nucWpnSw </td>
          <td>(</td>
          <td class="paramtype">&quot;NUC_WPN_SW&quot;</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ab4be17c28d83227800ca60b9a8c6f6b5">NUC_SW1</a></td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>The NUC Weapon Switch has no function in DCS. This will only move the switch in the sim to match the physical cockpit. </dd></dl>

<p class="reference">References <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00096">NUC_SW1</a>.</p>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d" name="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&#160;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Arduino Setup Function</p>
<p>Arduino standard Setup Function. Code who should be executed only once at the programm start, belongs in this function. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00131">131</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  131</span>             {</div>
<div class="line"><span class="lineno">  132</span> </div>
<div class="line"><span class="lineno">  133</span>  <span class="comment">// Run DCS Bios setup function</span></div>
<div class="line"><span class="lineno">  134</span>  DcsBios::setup();</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>  pinMode(<a class="code hl_define" href="#a6d5aeaecc7f4ca06f839d3a47798be82">OXY_FLOW_SW1</a>, INPUT_PULLUP);</div>
<div class="line"><span class="lineno">  137</span>}</div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_a6d5aeaecc7f4ca06f839d3a47798be82"><div class="ttname"><a href="#a6d5aeaecc7f4ca06f839d3a47798be82">OXY_FLOW_SW1</a></div><div class="ttdeci">#define OXY_FLOW_SW1</div><div class="ttdoc">Oxygen Flow Rate.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00095">4A7A2-OBOGS_PANEL.ino:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00095">OXY_FLOW_SW1</a>.</p>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f" name="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&#160;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Arduino Loop Function</p>
<p>Arduino standard Loop Function. Code who should be executed over and over in a loop, belongs in this function.</p>
<dl class="section note"><dt>Note</dt><dd>DCSBios control reference has 2 options for the OXY FLOW knob, Potentiometer or Rotary Encoder. <br  />
 To use the Rotary Encoder built-in-option requires each postion to be connected to an Arduino Pin. It is possible to connect the spec'd knob to a second pin on the Arduino to use the Rotary Encoder sample code with the step size set to "-65535", "+65535" for full-off and full-on.</dd></dl>
<h3><a class="anchor" id="autotoc_md40"></a>
OXY_FLOW Logic</h3>
<p>To overcome the difference between physical switch and the sim's modeling of it, the custom logic follows DCSBios switch methodology for debounce.<br  />
</p><ol type="1">
<li>Read the current button position.</li>
<li>If REVERSE_OXY_FLOW direction = true, then reverse current button position read.</li>
<li>Then by tracking the current state versus an intermediary state and comparing the time difference from when the button last changed is longer than the debounce delay, send the DCSBios message to move the OXY FLOW knob to either full-on or full-off and update the variables to be ready for the next switch movement. </li>
</ol>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">159</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>            {</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>  <span class="comment">//Run DCS Bios loop function</span></div>
<div class="line"><span class="lineno">  162</span>  DcsBios::loop();</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a> = digitalRead(<a class="code hl_define" href="#a6d5aeaecc7f4ca06f839d3a47798be82">OXY_FLOW_SW1</a>);</div>
<div class="line"><span class="lineno">  165</span>  <span class="keywordflow">if</span> (<a class="code hl_define" href="#a95f50ffddc5ffd2caf5b0f075ae698f1">REVERSE_OXY_FLOW</a> == <span class="keyword">true</span>) {  <span class="comment">// if reverse the button position move is true</span></div>
<div class="line"><span class="lineno">  166</span>    <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a> = !<a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a>;    <span class="comment">// then set button state to opposite.</span></div>
<div class="line"><span class="lineno">  167</span>  }</div>
<div class="line"><span class="lineno">  168</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> now = millis();  <span class="comment">// get current time.</span></div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a> != <a class="code hl_variable" href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a>) {  <span class="comment">// If the button state changed from the button debounce state</span></div>
<div class="line"><span class="lineno">  172</span>    <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a0857da656d01ec986bcb81ea04f14713">lastDebounceTime</a> = now;                  <span class="comment">// then save the current time.</span></div>
<div class="line"><span class="lineno">  173</span>    <a class="code hl_variable" href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a> = <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a>;       <span class="comment">// and save the current button state to the debounce state.</span></div>
<div class="line"><span class="lineno">  174</span>  }</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="keywordflow">if</span> ((now - <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a0857da656d01ec986bcb81ea04f14713">lastDebounceTime</a>) &gt;= <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a77d7d18f51343feebbe6d0eea7b4ac57">debounceDelay</a>) {                                                 <span class="comment">// if the difference in time between now and when the switch last changed is greater than the debounce time</span></div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a> != <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a34885defff73ea686f4f6c3dc202d134">lastBtnState</a>) {                                                     <span class="comment">// and if the button debounce state is not the same as the last button state</span></div>
<div class="line"><span class="lineno">  178</span>      <span class="keywordflow">if</span> (DcsBios::tryToSendDcsBiosMessage(<a class="code hl_define" href="#a2c2ee0bc9aef0469f08b839b049a3ed4">OXY_MSG</a>, <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a> == HIGH ? <a class="code hl_define" href="#ab8e8ca88917bfe7ac949390e85c5681b">MIN_FLOW</a> : <a class="code hl_define" href="#ada2a757bd8f6c604855a1268db2f93a4">MAX_FLOW</a>)) {  <span class="comment">// then send the corresponding DCSBios Message to move the switch in the correct direction.</span></div>
<div class="line"><span class="lineno">  179</span>        <a class="code hl_variable" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a34885defff73ea686f4f6c3dc202d134">lastBtnState</a> = <a class="code hl_variable" href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a>;                                                        <span class="comment">// and then save the button&#39;s current state to the last state in preparation for the next time it&#39;s flipped.</span></div>
<div class="line"><span class="lineno">  180</span>      }</div>
<div class="line"><span class="lineno">  181</span>    }</div>
<div class="line"><span class="lineno">  182</span>  }</div>
<div class="line"><span class="lineno">  183</span>}</div>
<div class="ttc" id="a1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_html_a0857da656d01ec986bcb81ea04f14713"><div class="ttname"><a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a0857da656d01ec986bcb81ea04f14713">lastDebounceTime</a></div><div class="ttdeci">unsigned long lastDebounceTime[20]</div><div class="ttdoc">Array to hold last time of DDI button update for debounce.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00128">1A3-L_DDI_AND_EWI.ino:128</a></div></div>
<div class="ttc" id="a1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_html_a34885defff73ea686f4f6c3dc202d134"><div class="ttname"><a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a34885defff73ea686f4f6c3dc202d134">lastBtnState</a></div><div class="ttdeci">bool lastBtnState[20]</div><div class="ttdoc">Array to hold the last state of the 20 DDI buttons.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00125">1A3-L_DDI_AND_EWI.ino:125</a></div></div>
<div class="ttc" id="a1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_html_a77d7d18f51343feebbe6d0eea7b4ac57"><div class="ttname"><a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#a77d7d18f51343feebbe6d0eea7b4ac57">debounceDelay</a></div><div class="ttdeci">unsigned long debounceDelay</div><div class="ttdoc">The debounce delay duration in ms, increase if the output flickers.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00129">1A3-L_DDI_AND_EWI.ino:129</a></div></div>
<div class="ttc" id="a1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_html_aa2d73d1e6f7806a1a142b55d9108096c"><div class="ttname"><a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino.html#aa2d73d1e6f7806a1a142b55d9108096c">buttonState</a></div><div class="ttdeci">bool buttonState[20]</div><div class="ttdoc">Array to hold the current state of the 20 DDI buttons.</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00126">1A3-L_DDI_AND_EWI.ino:126</a></div></div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_a16acbaf3b1322ef405fe69a73df920a0"><div class="ttname"><a href="#a16acbaf3b1322ef405fe69a73df920a0">buttonDebounceState</a></div><div class="ttdeci">bool buttonDebounceState</div><div class="ttdoc">Button debounce state for oxy flow logic.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00108">4A7A2-OBOGS_PANEL.ino:108</a></div></div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_a2c2ee0bc9aef0469f08b839b049a3ed4"><div class="ttname"><a href="#a2c2ee0bc9aef0469f08b839b049a3ed4">OXY_MSG</a></div><div class="ttdeci">#define OXY_MSG</div><div class="ttdoc">DCSBios Message to move the OXY_FLOW knob.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00102">4A7A2-OBOGS_PANEL.ino:102</a></div></div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_a95f50ffddc5ffd2caf5b0f075ae698f1"><div class="ttname"><a href="#a95f50ffddc5ffd2caf5b0f075ae698f1">REVERSE_OXY_FLOW</a></div><div class="ttdeci">#define REVERSE_OXY_FLOW</div><div class="ttdoc">If OXY FLOW knob rotates in the opposite direction in the sim compared to the physical switch then ch...</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00105">4A7A2-OBOGS_PANEL.ino:105</a></div></div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_ab8e8ca88917bfe7ac949390e85c5681b"><div class="ttname"><a href="#ab8e8ca88917bfe7ac949390e85c5681b">MIN_FLOW</a></div><div class="ttdeci">#define MIN_FLOW</div><div class="ttdoc">The OXY FLOW Knob in the sim is a 90 degree pot, with min = 0 we&#39;ll subtract the full on value.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00104">4A7A2-OBOGS_PANEL.ino:104</a></div></div>
<div class="ttc" id="a4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_html_ada2a757bd8f6c604855a1268db2f93a4"><div class="ttname"><a href="#ada2a757bd8f6c604855a1268db2f93a4">MAX_FLOW</a></div><div class="ttdeci">#define MAX_FLOW</div><div class="ttdoc">The OXY FLOW knob in the sim is a 90 degree pot, with max = 65535 we&#39;ll add the full on value.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00103">4A7A2-OBOGS_PANEL.ino:103</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00108">buttonDebounceState</a>, <a class="el" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00126">buttonState</a>, <a class="el" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00129">debounceDelay</a>, <a class="el" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00125">lastBtnState</a>, <a class="el" href="../../dd/d3f/1_a3-_l___d_d_i___a_n_d___e_w_i_8ino_source.html#l00128">lastDebounceTime</a>, <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00103">MAX_FLOW</a>, <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00104">MIN_FLOW</a>, <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00095">OXY_FLOW_SW1</a>, <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00102">OXY_MSG</a>, and <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00105">REVERSE_OXY_FLOW</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aff5716cbfac20e2b381708cdbfe70c01" name="aff5716cbfac20e2b381708cdbfe70c01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5716cbfac20e2b381708cdbfe70c01">&#9670;&#160;</a></span>lastBtnState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lastBtnState = LOW</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last button state for oxy flow logic, initialize to off. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00107">107</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="a16acbaf3b1322ef405fe69a73df920a0" name="a16acbaf3b1322ef405fe69a73df920a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16acbaf3b1322ef405fe69a73df920a0">&#9670;&#160;</a></span>buttonDebounceState</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool buttonDebounceState = LOW</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Button debounce state for oxy flow logic. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00108">108</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00159">loop()</a>.</p>

</div>
</div>
<a id="a025a85b33749fd5dde5cb7edd7aea941" name="a025a85b33749fd5dde5cb7edd7aea941"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a025a85b33749fd5dde5cb7edd7aea941">&#9670;&#160;</a></span>lastDebounceTime</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long lastDebounceTime = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Variable to hold last button update time for Oxy flow logic, initialize to 0. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00109">109</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
<a id="a77d7d18f51343feebbe6d0eea7b4ac57" name="a77d7d18f51343feebbe6d0eea7b4ac57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77d7d18f51343feebbe6d0eea7b4ac57">&#9670;&#160;</a></span>debounceDelay</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long debounceDelay = 10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The debounce delay duration in ms, <b>increase if the output flickers</b>. </p>

<p class="definition">Definition at line <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html#l00110">110</a> of file <a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino_source.html">4A7A2-OBOGS_PANEL.ino</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_416e1f4062dc4b1281b9b1ab60996ed6.html">embedded</a></li><li class="navelem"><a class="el" href="../../dir_94f990e4bb0a41b1e499ea4303726f8c.html">OH4_Left_Console</a></li><li class="navelem"><a class="el" href="../../dir_9567079022f6ffd2539bc05daf980cb8.html">4A7A2-OBOGS_PANEL</a></li><li class="navelem"><a class="el" href="../../d5/d48/4_a7_a2-_o_b_o_g_s___p_a_n_e_l_8ino.html">4A7A2-OBOGS_PANEL.ino</a></li>
    <li class="footer">Generated on Mon Jun 9 2025 21:06:39 for API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
