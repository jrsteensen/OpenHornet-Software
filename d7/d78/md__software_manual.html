<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Documentation: Software Manual</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">DoxygenAwesomeFragmentCopyButton.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">DoxygenAwesomeParagraphLink.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">DoxygenAwesomeInteractiveToc.init()</script>
<script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
<script type="text/javascript">DoxygenAwesomeTabs.init()</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../oh_vert.svg"/></td>
  <td id="projectalign">
   <div id="projectname">API Documentation<span id="projectnumber">&#160;v0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d7/d78/md__software_manual.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Software Manual</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md5">Supported Hardware</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md6">Prerequisites</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md7">Supported Software</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md8">Arduino Libraries</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md9">Suggested debug tools</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md10">Preparation</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md11">Sketch naming</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md12">Documenting Software with Doxygen</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md13">File Header</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md14">Sketch Summary</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md15">Functions</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md16">Slave ID</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md17">Versioning</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md18">Makefile</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md19">Testing your Software</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md20">Github Actions</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md21">Git Submodules</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md22">Arduino Libraries</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md23">Resources</a>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="autotoc_md4"></a></p>
<p>This manual is about writing software for the OpenHornet project. It shows how to write, document and test your software.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Supported Hardware</h1>
<ul>
<li><a href="https://store-usa.arduino.cc/products/arduino-mega-2560-rev3">Arduino MEGA 2560</a></li>
<li><a href="https://www.sparkfun.com/products/12640">Sparkfun Pro-Micro</a></li>
<li><a href="https://www.adafruit.com/product/2378">Arduino Pro-Mini</a></li>
<li><a href="https://www.wemos.cc/en/latest/s2/s2_mini.html">WEMOS S2 mini (ESP32-S2FN4R2)</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
Prerequisites</h1>
<ul>
<li>Arduino IDE (with Libraries listed below)</li>
<li>GNU Make</li>
<li>Local Doxygen installation</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
Supported Software</h1>
<ul>
<li>Arduino IDE 1.8.10+ (Arduino IDE 2.0.0+ preferred)</li>
<li>GNU Make 3.81+</li>
<li>DCS-BIOS v2.8.7+</li>
<li>Doxygen 1.8.13</li>
</ul>
<h2><a class="anchor" id="autotoc_md8"></a>
Arduino Libraries</h2>
<ul>
<li>dcs-bios-arduino-library-0.3.9+</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Suggested debug tools</h2>
<ul>
<li>Bort v0.2.4+</li>
<li>Dcs-Insight v1.8.3+</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Preparation</h1>
<p>The starting point of every new software sketch is the OHSketchTemplate folder. Please copy the whole folder. There is a Makefile included which defines the target board and libraries needed for your sketch. Once copied delete the sample function from the <a class="el" href="../../dd/d27/_o_h_sketch_template_8ino.html" title="&lt;A short description of the PCB, will appear in the list of files.&gt;">OHSketchTemplate.ino</a>. Then change all the @tags with your own information.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Sketch naming</h1>
<p>The Sketches are named according to the reference designator found in the OH-INTERCONNECT document. The first part of the name is the OH No. found in the drawing. It is the number beneath the Board type.</p>
<p>e.g: 1A2 for the Master Arm Panel.</p>
<p>The No. is followed by a minus sign "-" (without space). Then the name of the component the sketch is for. The name is written in uppercase and with underscores "\_" instead of spaces.</p>
<p>e.g: 1A2-MASTER_ARM_PANEL for the Master Arm Panel.</p>
<p>If the Sketch is for more than one component. Meaning that the board controls more than one component, use the name of the first component the sketch is for.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Documenting Software with Doxygen</h1>
<p>It is imperative that all the code you write is documented. We use doxygen as API documentation generator. So all the comments have to be doxygen compatible. Otherwise they will not show up in the documentation.</p>
<p>We use Javadoc style comment markup. Since it is the easiest to read for humans.</p>
<p>The following is an example of how to document code:</p>
<h2><a class="anchor" id="autotoc_md13"></a>
File Header</h2>
<div class="fragment"><div class="line">/**************************************************************************************</div>
<div class="line"> *        ____                   _    _                       _</div>
<div class="line"> *       / __ \                 | |  | |                     | |</div>
<div class="line"> *      | |  | |_ __   ___ _ __ | |__| | ___  _ __ _ __   ___| |_</div>
<div class="line"> *      | |  | | &#39;_ \ / _ \ &#39;_ \|  __  |/ _ \| &#39;__| &#39;_ \ / _ \ __|</div>
<div class="line"> *      | |__| | |_) |  __/ | | | |  | | (_) | |  | | | |  __/ |_</div>
<div class="line"> *       \____/| .__/ \___|_| |_|_|  |_|\___/|_|  |_| |_|\___|\__|</div>
<div class="line"> *             | |</div>
<div class="line"> *             |_|</div>
<div class="line"> *   ----------------------------------------------------------------------------------</div>
<div class="line"> *   Copyright 2016-2024 OpenHornet</div>
<div class="line"> *</div>
<div class="line"> *   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</div>
<div class="line"> *   you may not use this file except in compliance with the License.</div>
<div class="line"> *   You may obtain a copy of the License at</div>
<div class="line"> *</div>
<div class="line"> *     http://www.apache.org/licenses/LICENSE-2.0</div>
<div class="line"> *</div>
<div class="line"> *   Unless required by applicable law or agreed to in writing, software</div>
<div class="line"> *   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</div>
<div class="line"> *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div>
<div class="line"> *   See the License for the specific language governing permissions and</div>
<div class="line"> *   limitations under the License.</div>
<div class="line"> *   ----------------------------------------------------------------------------------</div>
<div class="line"> *   Note: All other portions of OpenHornet not within the &#39;OpenHornet-Software&#39; </div>
<div class="line"> *   GitHub repository is released under the Creative Commons Attribution - </div>
<div class="line"> *   Non-Commercial - Share Alike License. (CC BY-NC-SA 4.0)</div>
<div class="line"> *   ----------------------------------------------------------------------------------</div>
<div class="line"> *   This Project uses Doxygen as a documentation generator.</div>
<div class="line"> *   Please use Doxygen capable comments.</div>
<div class="line"> **************************************************************************************/</div>
</div><!-- fragment --><p> This is the standard file header of OH. It has to be used as is in every sketch written for the OH Software.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Sketch Summary</h2>
<p>The Sketch summary comments should be on top of the file, right after the Header and looks like this: </p><div class="fragment"><div class="line">/**</div>
<div class="line"> * @file OHSketchTemplate.ino</div>
<div class="line"> * @author Balz Reber</div>
<div class="line"> * @date 02.26.2024</div>
<div class="line"> * @version u.0.0.1 (untested)</div>
<div class="line"> * @warning This sketch is based on a wiring diagram, and was not yet tested on hardware</div>
<div class="line"> * @brief This is the OpenHornet Sketch Template.</div>
<div class="line"> *</div>
<div class="line"> * @details This is the OpenHornet Sketch Template. It should be used as a starting point for every new sketch.</div>
<div class="line"> * Please copy the whole OHSketchTemplate folder to start, and ensure the correct line in the Makefile is uncommented.</div>
<div class="line"> * </div>
<div class="line"> *  * **Intended Board:**</div>
<div class="line"> * &lt;Replace with hardware type such as ABSIS ALE, or ABSIS ALE w/ABSIS Relay Module, etc.&gt;</div>
<div class="line"> * </div>
<div class="line"> * **Wiring diagram:**</div>
<div class="line"> * PIN | Function</div>
<div class="line"> * --- | ---</div>
<div class="line"> * 1   | function 1</div>
<div class="line"> * 2   | function 2</div>
<div class="line"> * 3   | function 3</div>
<div class="line"> * </div>
<div class="line"> */</div>
</div><!-- fragment --><p> The elements in the summary are the following:</p>
<h3>File</h3>
<p>The @file has to have the exact same name as the filename. Including the file extension.</p>
<h3>Author</h3>
<p>The author of the Sketch. If more than one person was working on the sketch, the authors shall be listed in a comma separated list. With the original author at first place.</p>
<h3>Date</h3>
<p>The date the sketch was last modified.</p>
<h3>Version</h3>
<p>The version of the sketch. To see how the versioning of sketches works, see "Versioning" in this document.</p>
<h3>Warning</h3>
<p>Every untested sketch has to have a "This sketch is based on a wiring diagram, and was not yet tested on hardware" warning.</p>
<h3>Brief</h3>
<p>A brief description of the sketch.</p>
<h3>Detail</h3>
<p>A more detailed description of the sketch</p>
<h3>Intended board</h3>
<p>This is the hardware that this sketch is intended to run on.</p>
<h3>Wiring diagram</h3>
<p>A quick reference showing connections to this PCB, for ease of reference when reading this code.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Functions</h2>
<p>Function documentations should look like this:</p>
<div class="fragment"><div class="line">/**</div>
<div class="line">* A brief description on a single line, ended by a period or blank line.</div>
<div class="line">*</div>
<div class="line">* A longer comment, which may stretch over several lines and may include other things like:</div>
<div class="line">* - a list like this</div>
<div class="line">* - special markup like below</div>
<div class="line">*</div>
<div class="line">* @param myParam1 Description of 1st parameter.</div>
<div class="line">* @param myParam2 Description of 2nd parameter.</div>
<div class="line">* @returns Description of returned value.</div>
<div class="line">*/</div>
<div class="line">int sampleFunction(int myParam1, int myParam2) {</div>
<div class="line">  return myReturn;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Doxygen then takes this and generates a Function documentation looking like this:</p>
<p><img src="https://raw.githubusercontent.com/jrsteensen/OpenHornet/master/images/Logo/open_hornet_avatar.png" alt="IMAGE" class="inline"/></p>
<p>Functions should be commented as seen above. It is important that every function you write is commented like this. Otherwise it will not show up in the API documentation. The comment structure is as followed:</p>
<h3>Brief</h3>
<div class="fragment"><div class="line">/**</div>
<div class="line">* A brief description on a single line, ended by a period or blank line.</div>
</div><!-- fragment --><p> The comment has to start with <code>/**</code> and then a new line with a single <code>*</code>. Then you write a very short description of what the function will do. The short description has to end with a dot <code>.</code> or a blank like.</p>
<h3>Description</h3>
<div class="fragment"><div class="line">* A longer comment, which may stretch over several lines and may include other things like:</div>
<div class="line">* - a list like this</div>
<div class="line">* - special markup like below</div>
</div><!-- fragment --><p> This is the main description of your function. Write in detail what your function does.</p>
<h3>Parameters</h3>
<div class="fragment"><div class="line">* @param myParam1 Description of 1st parameter.</div>
<div class="line">* @param myParam2 Description of 2nd parameter.</div>
</div><!-- fragment --><p> Each parameter the function uses is documented with a <code>@param</code> tag. After the tag there is a space and then the name of the parameter. Then another space and then the description of the parameter.</p>
<h3>Return</h3>
<div class="fragment"><div class="line">* @returns Description of returned value.</div>
</div><!-- fragment --><p> The return parameter, if there is any, is documented with a <code>@returns</code> parameter. The return parameter needs no name. So after a space you can write the description of the parameter.</p>
<h3>Other Comments</h3>
<div class="fragment"><div class="line">// Takes the input var and duplicates it. Writes the result in a newly created result var of type int.</div>
<div class="line">int result = 2 * input</div>
</div><!-- fragment --><p> The insides of a function are a black box to doxygen. It is important that you comment the code inside a function nevertheless. This has to be done for other coders who might have to work with your code. Comments inside a function are done with a simple <code>//</code> before the comment.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Slave ID</h1>
<p>All sketches who run as slave on the RS485 bus have to have a slave ID (DCSBIOS_RS485_SLAVE). That slave ID has to be unique on the RS485 bus the sketch runs on. But they can be the same for different buses (Every RS485 master has it's own bus). The slave ID is given according to the BUS ADDR in the interconnect.</p>
<p>e.g 1A2A (Master Arm Panel) shall be Bus Address 1</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Versioning</h1>
<p>The version number consists of three digits.</p>
<p>eg: 1.4.2</p>
<p>Those three numbers are release.feature.change</p>
<ul>
<li>The last number has to be changed every time there was a change to the sketch. No matter how miniscule.</li>
<li>The middle number has to be changed every time there is a new complete feature inside the sketch.</li>
<li>The leading number is only for releases. So only changes if there was a new release of the sketch.</li>
<li>If any number changes, all subsequent numbers are reset to 0.</li>
</ul>
<p>Sketches who are untested have to have a leading "u" before the version number and "(untested)" behind the version no.</p>
<p>eg: u.1.4.2 (untested)</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Makefile</h1>
<p>Since the OpenHornet project targets multiple Arduino boards and libraries, the <code>Makefile</code> located in each sketch directory is necessary to determine which specific Arduino board and libraries are needed for each component.</p>
<p><code>LIBRARIES</code> is a space-separated list of libraries to include in your sketch. These must first be added as a git sub-module in the <code>/libraries</code> folder of the project. See Arduino Libraries</p>
<p>The appropriate board Makefile must be included at the end of the file. Valid options are:</p><ul>
<li>../../include/mega2560.mk (Mega 2560)</li>
<li>../../include/promicro.mk (Sparkfun Pro Micro)</li>
<li>../../include/promini.mk (Sparkfun Pro Mini)</li>
<li>../../include/s2mini.mk (Wemos S2 Mini)</li>
</ul>
<p>The Makefile will be used by Github Actions to verify that code will compile without errors. Once successful, a downloadable zip file will be created with the compiled firmware which can be flashed to the desired board.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Testing your Software</h1>
<p>Before you upload anything, please check if your sketch compiles in your Arduino editor. If it does, check if doxygen compiles with your local doxygen installation.</p>
<p>Once those local tests are successfully, open a PR to the OpenHornet-Software repo's develop branch and see if the CI/Doxygen tests are successful. If they are, then request your PR to be reviewed.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Github Actions</h1>
<p>Github Actions is a continuous integration testing engine. It is connected with the OpenHornet Github repository. When a Pull request is opened or merged, Github Actions will checkout the git repo and attempt to compile the code. If the code compiles successfully and there where no errors detected, it automatically updates the Doxygen documentation and uploads it back to the repo.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Git Submodules</h1>
<p>The OpenHornet software projects makes use of <a href="https://github.blog/2016-02-01-working-with-submodules/">git submodules</a> to include and link to other software libraries which are used in Arduino sketches to provide additional functionality. Most git frontends and tools support git submodules although options differ between each.</p>
<ul>
<li>Git for Windows: Ensure that you select the option to "recursively clone submodules" when you clone the repository.</li>
<li>Github Desktop: Github Desktop will clone submodules automatically if they exist in the main branch.</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Arduino Libraries</h1>
<p>Arduino Libraries which are included in your sketch need to be added as a (git submodule)[#Git-Submodules] to the repository and then referenced in the Makefile for the sketch. You can find a list of already included libraries in the "Supported Software" section of this manual. If you need another library, please add it using <code>git submodule add <a href="https://github.com/">https://github.com/</a>&lt;organization&gt;/&lt;project&gt;.git</code> under the <code>/libraries</code> directory.</p>
<p>Libraries are downloaded during each Github Actions run and made available to the sketch when compiling. Ensure that the libraries are referenced in the Makefile using the same name that they exist in the <code>/libraries</code> folder.</p>
<h1><a class="anchor" id="autotoc_md23"></a>
Resources</h1>
<ul>
<li><a href="http://www.doxygen.org">http://www.doxygen.org</a></li>
<li><a href="https://github.com/DCS-Skunkworks/dcs-bios">https://github.com/DCS-Skunkworks/dcs-bios</a></li>
<li><a href="https://github.com/DCS-Skunkworks/dcs-bios-arduino-library/tree/327bf2233603c28989de63dc96e17abecf91ed31">https://github.com/DCS-Skunkworks/dcs-bios-arduino-library/tree/327bf2233603c28989de63dc96e17abecf91ed31</a></li>
<li><a href="https://github.blog/2016-02-01-working-with-submodules/">https://github.blog/2016-02-01-working-with-submodules/</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 9 2025 21:06:39 for API Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
